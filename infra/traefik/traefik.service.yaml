---
kind: Service
apiVersion: v1
metadata:
  name: traefik-ingress-service
  labels:
    lechaterrant.com/app: traefik
    lechaterrant.com/stack: traefik
  annotations:
    lechaterrant.com/load-balancer: traefik
    # Add here the id of the load balancer to use
    # The ID is output by terraform scripts
    kubernetes.digitalocean.com/load-balancer-id: f869da76-31ec-40e0-af99-f0fe5eb15e11
spec:
  type: LoadBalancer
  selector:
    lechaterrant.com/app: traefik
  ports:
    - protocol: TCP
      port: 80
      targetPort: 80
      nodePort: 30000
      name: web
    - protocol: TCP
      port: 443
      targetPort: 443
      nodePort: 30443
      name: websecure
